{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43389395-13044f7a31a85be77891b044e';\nconst url = 'https://pixabay.com/api/';\n\nexport async function fetchData(searchTerm, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n\n  const response = await axios.get(`${url}?${params}`);\n  if (!response.data || response.data.totalHits === 0) {\n    throw new Error('No images found');\n  }\n  return response.data;\n}\n","export function renderImages(images) {\n  return images.map(image => `\n    <li class=\"card\">\n        <div class=\"place-for-image\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"picture\"/>\n            </a>\n        </div>\n        <div class=\"info-text\">\n            <div class=\"description\">\n                <span class=\"bold-text\">Likes</span>\n                <span class=\"info-value\">${image.likes}</span>\n            </div>\n            <div class=\"description\">\n                <span class=\"bold-text\">Views</span>\n                <span class=\"info-value\">${image.views}</span>\n            </div>\n            <div class=\"description\">\n                <span class=\"bold-text\">Comments</span>\n                <span class=\"info-value\">${image.comments}</span>\n            </div>\n            <div class=\"description\">\n                <span class=\"bold-text\">Downloads</span>\n                <span class=\"info-value\">${image.downloads}</span>\n            </div>\n        </div>\n    </li>\n  `).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchData } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst photoGallery = document.querySelector('.images-place');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet searchTerm = '';\nlet totalPages = 1;\n\nconst book = new SimpleLightbox('.card .place-for-image a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nloadMoreButton.style.display = 'none';\n\nform.addEventListener('submit', handleSearch);\nloadMoreButton.addEventListener('click', loadMoreImages);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  searchTerm = event.currentTarget.elements.inputSearch.value;\n  currentPage = 1;\n  totalPages = 1; // Reset total pages\n  photoGallery.innerHTML = '';\n  loader.style.display = 'block';\n  try {\n    const data = await fetchData(searchTerm, currentPage);\n    if (data.totalHits === 0) {\n      showErrorToast('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n      totalPages = Math.ceil(data.totalHits / 15); \n      renderAndShowImages(data.hits);\n      showLoadMoreButton();\n      book.refresh();\n    }\n  } catch (error) {\n    showErrorToast(`An error occurred: ${error.message}`);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nasync function loadMoreImages() {\n  currentPage++;\n  loader.style.display = 'block';\n  try {\n    const data = await fetchData(searchTerm, currentPage);\n    renderAndShowImages(data.hits);\n    book.refresh();\n    if (currentPage === totalPages) { \n      loadMoreButton.style.display = 'none';\n    }\n  } catch (error) {\n    showErrorToast(`An error occurred: ${error.message}`);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction renderAndShowImages(images) {\n  const html = renderImages(images);\n  photoGallery.insertAdjacentHTML('beforeend', html);\n}\n\nfunction showErrorToast(message) {\n  iziToast.error({\n    title: 'Ops.',\n    titleColor: 'white',\n    message: message,\n    messageColor: 'white',\n    position: 'topCenter',\n    timeout: 5000,\n  });\n}\n\nfunction showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n"],"names":["API_KEY","url","fetchData","searchTerm","page","params","response","axios","renderImages","images","image","form","loader","photoGallery","loadMoreButton","currentPage","totalPages","book","SimpleLightbox","handleSearch","loadMoreImages","event","data","showErrorToast","renderAndShowImages","showLoadMoreButton","error","html","message","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAM,2BAEL,eAAeC,EAAUC,EAAYC,EAAM,CAChD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,CAAG,EAEKE,EAAW,MAAMC,EAAM,IAAI,GAAGN,CAAG,IAAII,CAAM,EAAE,EACnD,GAAI,CAACC,EAAS,MAAQA,EAAS,KAAK,YAAc,EAChD,MAAM,IAAI,MAAM,iBAAiB,EAEnC,OAAOA,EAAS,IAClB,CCrBO,SAASE,EAAaC,EAAQ,CACnC,OAAOA,EAAO,IAAIC,GAAS;AAAA;AAAA;AAAA,uBAGNA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAMvBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,2CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,GAIvD,EAAE,KAAK,EAAE,CACZ,CCrBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,SAAS,cAAc,eAAe,EACrDC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAc,EACdZ,EAAa,GACba,EAAa,EAEjB,MAAMC,EAAO,IAAIC,EAAe,2BAA4B,CAC1D,aAAc,MACd,aAAc,GAChB,CAAC,EAEDJ,EAAe,MAAM,QAAU,OAE/BH,EAAK,iBAAiB,SAAUQ,CAAY,EAC5CL,EAAe,iBAAiB,QAASM,CAAc,EAEvD,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpBlB,EAAakB,EAAM,cAAc,SAAS,YAAY,MACtDN,EAAc,EACdC,EAAa,EACbH,EAAa,UAAY,GACzBD,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMU,EAAO,MAAMpB,EAAUC,EAAYY,CAAW,EAChDO,EAAK,YAAc,EACrBC,EAAe,0EAA0E,GAEzFP,EAAa,KAAK,KAAKM,EAAK,UAAY,EAAE,EAC1CE,EAAoBF,EAAK,IAAI,EAC7BG,IACAR,EAAK,QAAO,EAEf,OAAQS,EAAO,CACdH,EAAe,sBAAsBG,EAAM,OAAO,EAAE,CACxD,QAAY,CACRd,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,eAAeQ,GAAiB,CAC9BL,IACAH,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMU,EAAO,MAAMpB,EAAUC,EAAYY,CAAW,EACpDS,EAAoBF,EAAK,IAAI,EAC7BL,EAAK,QAAO,EACRF,IAAgBC,IAClBF,EAAe,MAAM,QAAU,OAElC,OAAQY,EAAO,CACdH,EAAe,sBAAsBG,EAAM,OAAO,EAAE,CACxD,QAAY,CACRd,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,SAASY,EAAoBf,EAAQ,CACnC,MAAMkB,EAAOnB,EAAaC,CAAM,EAChCI,EAAa,mBAAmB,YAAac,CAAI,CACnD,CAEA,SAASJ,EAAeK,EAAS,CAC/BC,EAAS,MAAM,CACb,MAAO,OACP,WAAY,QACZ,QAASD,EACT,aAAc,QACd,SAAU,YACV,QAAS,GACb,CAAG,CACH,CAEA,SAASH,GAAqB,CAC5BX,EAAe,MAAM,QAAU,OACjC"}